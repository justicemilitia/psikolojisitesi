{% extends "base.html" %}

{% block title %}Arama Sonuçları - Modecalm{% endblock %}

{% block content %}
<section class="py-20 bg-gray-50 min-h-screen">
<div class="max-w-7xl mx-auto px-6">
    <div class="flex flex-col md:flex-row justify-between items-center mb-12 gap-6">
        <h1 class="text-4xl font-bold text-gray-900 leading-tight">
        Search Results: "{{ request.args.get('q') }}"
        </h1>
        <form action="{{ url_for('psychologist.search_psychologists') }}" method="GET" class="w-full md:w-1/3 flex items-center gap-4">
            <div class="relative w-full">
                <div class="absolute inset-y-0 left-0 flex items-center pl-3">
                <i class="ri-search-line text-gray-400"></i>
                </div>
                <input type="text" name="q" class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="Uzmanlık alanına göre ara..." data-translate-placeholder="search-by-specialty" value="{{ request.args.get('q', '') }}">
            </div>
            <button type="submit" class="bg-primary text-white px-6 py-2 rounded-xl hover:bg-red-800 transition-colors whitespace-nowrap" data-translate="search-button">
            Ara
            </button>
        </form>
    </div>

{% if psychologists %}
{% set query = request.args.get('q', '') %}
{% set message = '"' ~ query|e ~ '" uzmanlık alanındaki terapistler gösteriliyor.' %}
<div class="bg-gray-100 text-gray-700 rounded-lg p-4 mb-8 flex justify-between items-center border border-gray-200">
    <span>
        {{ message | safe }}
    </span>
    <a href="{{ url_for('psychologist.list_psychologists') }}" class="text-primary hover:underline font-semibold transition-colors">
        Filtreyi Temizle
    </a>
</div>
{% endif %}

{% if psychologists %}
<div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8">
{% for psychologist in psychologists %}
<a href="{{ url_for('psychologist.psychologist_detail', psychologist_id=psychologist.id) }}" class="group bg-white rounded-2xl border border-gray-200 p-6 flex flex-col transition-all duration-300 hover:bg-gray-100 hover:shadow-lg">
<div class="flex items-center gap-4 mb-4">
<img src="{{ url_for('static', filename='images/' ~ (psychologist.profile_image_url if psychologist.profile_image_url else 'default_avatar.png')) }}" alt="{{ psychologist.full_name }}" class="w-20 h-20 object-cover rounded-full border-2 border-white shadow-sm">
<div class="flex-grow">
<h2 class="text-xl font-bold text-gray-900 group-hover:text-primary transition-colors">
{{ psychologist.full_name }}
</h2>
<p class="text-md text-gray-500 font-medium">{{ psychologist.title }}</p>
</div>
</div>

<div class="flex items-center mb-4">
{% for _ in range(psychologist.average_rating | default(0) | int) %}
<i class="ri-star-fill text-yellow-400 text-lg"></i>
{% endfor %}
{% for _ in range(5 - (psychologist.average_rating | default(0) | int)) %}
<i class="ri-star-line text-gray-300 text-lg"></i>
{% endfor %}
<span class="ml-2 text-sm text-gray-600">
({{ psychologist.review_count }} <span data-translate="reviews-count">yorum</span>)
</span>
</div>

<div class="flex flex-wrap gap-2 mb-4">
{% for specialty in psychologist.get_specialties() %}
<span class="bg-primary/10 text-primary text-xs font-medium px-3 py-1 rounded-full group-hover:bg-gray-300 transition-colors whitespace-nowrap hover:text-white transition-colors">
{{ specialty }}
</span>
{% endfor %}
</div>

<div class="mt-auto">
<span class="inline-block w-full text-center bg-gray-100 text-gray-700 py-2 rounded-lg group-hover:bg-gray-200 transition-colors whitespace-nowrap" data-translate="go-to-profile">
Profiline Git
</span>
</div>
</a>
{% endfor %}
</div>
{% else %}
<div class="bg-white rounded-2xl p-12 text-center border-2 border-dashed border-gray-300">
<i class="ri-sentiment-dissatisfied-line text-6xl text-primary mb-4"></i>
<h3 class="text-2xl font-bold text-gray-900 mb-2" data-translate="no-results-title">Sonuç Bulunamadı</h3>
<p class="text-gray-600 mb-6" data-translate="no-results-message">Aradığınız kriterlere uygun terapist bulunamadı. Lütfen arama teriminizi değiştirin veya aşağıdaki popüler uzmanlık alanlarını inceleyin.</p>
<a href="{{ url_for('psychologist.list_psychologists') }}" class="bg-primary text-white px-8 py-3 rounded-xl hover:bg-red-800 transition-colors" data-translate="view-all-psychologists">
Tüm Terapistleri Görüntüle
</a>
</div>
{% endif %}

<div class="mt-16">
<h2 class="text-3xl font-bold text-gray-900 text-center mb-6" data-translate="popular-specialties-title">Popüler Uzmanlık Alanları</h2>
<div class="flex flex-wrap justify-center gap-3">
<a href="{{ url_for('psychologist.search_psychologists', q='Anksiyete') }}" class="bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 hover:bg-gray-200 transition-colors" data-translate="anxiety">
Anksiyete
</a>
<a href="{{ url_for('psychologist.search_psychologists', q='Depresyon') }}" class="bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 hover:bg-gray-200 transition-colors" data-translate="depression">
Depresyon
</a>
<a href="{{ url_for('psychologist.search_psychologists', q='Travma') }}" class="bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 hover:bg-gray-200 transition-colors" data-translate="trauma">
Travma
</a>
<a href="{{ url_for('psychologist.search_psychologists', q='Bağımlılık') }}" class="bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 hover:bg-gray-200 transition-colors" data-translate="addiction">
Bağımlılık
</a>
<a href="{{ url_for('psychologist.search_psychologists', q='İlişki Sorunları') }}" class="bg-white text-gray-700 px-5 py-2 rounded-full border border-gray-300 hover:bg-gray-200 transition-colors" data-translate="relationship-problems">
İlişki Sorunları
</a>
</div>
</div>
</div>
</section>
{% endblock %}